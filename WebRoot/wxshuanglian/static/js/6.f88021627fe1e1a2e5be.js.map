{"version":3,"sources":["webpack:///src/components/projectTree.vue","webpack:///./src/components/projectTree.vue?7f7b","webpack:///./src/components/projectTree.vue","webpack:///./node_modules/_os-browserify@0.3.0@os-browserify/browser.js"],"names":["projectTree","name","inject","data","dialogDelete","dialogPassword","userPassword","level","brother","treedata","handleData","resolve","title","id","mc","important","leader","del","methods","handleNodeClick","console","log","handleEdit","this","$route","query","localStorage","setItem","fid","fdj","dj","userId","window","sessionStorage","getItem","userdj","creator_id","user_id","manager_id","target_dj","$router","push","path","$message","message","type","handleResolve","handleDelete","target_name","str","substr","cancleHandle","$refs","handleMenu","style","display","dele","showPsw","$","attr","removeClass","addClass","confirm","_this","ajax","url","baseUrl","targetid","targetdj","async","dataType","success","res","reload","init","targetOne","mounted","orgchart","nodeContent","nodeTitle","createNode","$node","document","oncontextmenu","e","mousedown","which","store","state","isCollapse","left","clientX","top","clientY","cur1","cursor","cur2","cur3","dblclick","warning","secondMenuIcon","class","click","siblings","toggle","secondMenu","append","scroll","watch","handler","route","deep","components_projectTree","render","_vm","_h","$createElement","_c","_self","attrs","span","ref","staticClass","shadow","nativeOn","$event","_v","on","visible","width","update:visible","append-to-body","placeholder","model","value","callback","$$v","expression","slot","_s","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","exports","endianness","hostname","location","loadavg","uptime","freemem","Number","MAX_VALUE","totalmem","cpus","release","navigator","appVersion","networkInterfaces","getNetworkInterfaces","arch","platform","tmpdir","tmpDir","EOL","homedir"],"mappings":"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","file":"static/js/6.f88021627fe1e1a2e5be.js","sourcesContent":["<template>\r\n    <div id=\"tree\">\r\n        <el-row>\r\n            <el-col :span=\"24\">\r\n                <el-card shadow=\"always\" class=\"card\" ref=\"card\" @click.native=\"cancleHandle()\">\r\n                    <div id=\"chart-container\"></div>\r\n                    <div class=\"handleMenu\" ref=\"handleMenu\">\r\n                        <span class=\"edit\" ref=\"cur1\" @click=\"handleEdit(handleData)\">编辑项目信息</span>\r\n                        <span class=\"resolve\" ref=\"cur2\" @click=\"handleResolve(handleData)\">分解项目节点</span>\r\n                        <span class=\"delete\" ref=\"cur3\" @click=\"handleDelete(handleData)\">删除项目节点</span>\r\n                    </div>\r\n                </el-card>\r\n            </el-col>\r\n        </el-row>\r\n        <el-dialog\r\n        class=\"delTips\"\r\n        title=\"谨慎操作提示\"\r\n        :visible.sync=\"dialogDelete\"\r\n        top=\"30vh\"\r\n        width=\"300px\">\r\n            <el-dialog\r\n            class=\"delTips\"\r\n            width=\"300px\"\r\n            title=\"请输入登录密码以确认\"\r\n            :visible.sync=\"dialogPassword\"\r\n            top=\"30vh\"\r\n            append-to-body>\r\n                <div class=\"psw\">\r\n                    <el-input type=\"password\" id=\"userPsw\" v-model=\"userPassword\" placeholder=\"请输入您的登录密码\"></el-input>\r\n                    <span @click=\"showPsw()\" id=\"eye\" class=\"iconfont icon-guanbixianshi\"></span>\r\n                </div>\r\n                <span slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button @click=\"dialogPassword = false\">取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"confirm()\">确 认</el-button>\r\n                </span>\r\n            </el-dialog>\r\n            <span>你确定要删除“<b>{{del.title}}</b>”此项目吗？其子项目也将会随之删除！</span>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"dialogDelete = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"dele()\">删 除</el-button>\r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport store from '../store/store.js'\r\nimport axios from 'axios';\r\nimport { type } from 'os';\r\nexport default {\r\n    name: 'tree',\r\n    inject:[\"reload\"],\r\n    data(){\r\n        return{\r\n            dialogDelete: false,\r\n            dialogPassword: false,\r\n            userPassword: '',       //用户密码\r\n            level: '2',\r\n            brother: '1',       //当前项目的兄弟节点  用来区分兄弟项目和进行操作\r\n            treedata: {\r\n                // title: '提高教育质量，加强学生全面发展',\r\n                // name: '李老师',\r\n                // level: '1',\r\n                // id: '1',\r\n                // brother: '1',\r\n                // className: 'firstLevel',\r\n                // children: [{\r\n                //     name: '周老师',\r\n                //     title: '提高学生的身体素质',\r\n                //     level: '2',\r\n                //     id: '2',\r\n                //     brother: '1',\r\n                //     className: 'secondLevel',\r\n                //     children: [{\r\n                //         name: '吴老师',\r\n                //         title: '学生体质测评合格率大于80%',\r\n                //         level: '3',\r\n                //         id: '5',\r\n                //         brother: '1',\r\n                //         className: 'thirdLevel',\r\n                //     },{\r\n                //         name: '孙老师',\r\n                //         title: '举办学校秋季运动会',\r\n                //         level: '3',\r\n                //         id: '6',\r\n                //         brother: '2',\r\n                //         className: 'thirdLevel',\r\n                //         children: [{\r\n                //             name: '马老师',\r\n                //             title: '开始运动会筹备</br>',\r\n                //             level: '4',\r\n                //             id: '16',\r\n                //             brother: '1',\r\n                //             className: 'fourthLevel',\r\n                //         },{\r\n                //             name: '钱老师',\r\n                //             title: '开幕式排练</br>',\r\n                //             level: '4',\r\n                //             id: '17',\r\n                //             brother: '2',\r\n                //             className: 'fourthLevel',\r\n                //         },{\r\n                //             name: '王老师',\r\n                //             title: '确定裁判组/工作</br>组',\r\n                //             level: '4',\r\n                //             id: '18',\r\n                //             brother: '3',\r\n                //             className: 'fourthLevel',\r\n                //         },{\r\n                //             name: '张老师',\r\n                //             title: '比赛项目报名</br>',\r\n                //             level: '4',\r\n                //             id: '19',\r\n                //             brother: '4',\r\n                //             className: 'fourthLevel',\r\n                //         },{\r\n                //             name: '唐老师',\r\n                //             title: '奖品设置与购买</br>',\r\n                //             level: '4',\r\n                //             id: '20',\r\n                //             brother: '5',\r\n                //             className: 'fourthLevel',\r\n                //         },{\r\n                //             name: '田老师',\r\n                //             title: '落实好急救措施</br>',\r\n                //             level: '4',\r\n                //             id: '21',\r\n                //             brother: '6',\r\n                //             className: 'fourthLevel',\r\n                //         },{\r\n                //             name: '孙老师',\r\n                //             title: '组织学生参加</br>',\r\n                //             level: '4',\r\n                //             id: '22',\r\n                //             brother: '7',\r\n                //             className: 'fourthLevel',\r\n                //         },{\r\n                //             name: '吴老师',\r\n                //             title: '指定比赛日程</br>',\r\n                //             level: '4',\r\n                //             id: '23',\r\n                //             brother: '8',\r\n                //             className: 'fourthLevel',\r\n                //         }]\r\n                //     },{\r\n                //         name: '周老师',\r\n                //         title: '提高学生的身体素质',\r\n                //         level: '3',\r\n                //         id: '2',\r\n                //         brother: '3',\r\n                //         className: 'thirdLevel',\r\n                //     }]\r\n                // }]\r\n            },\r\n            handleData: null,\r\n            resolve: {\r\n                title: '分解项目节点',\r\n                level: '2',\r\n                id: '1',\r\n                mc:'项目名称项目名称',\r\n                important: '',\r\n                leader: '',\r\n            },\r\n            del: {\r\n                title: '',\r\n                level: '',\r\n                id: '',\r\n            },\r\n        }\r\n    },\r\n    methods:{\r\n        handleNodeClick(data) {\r\n            console.log(data);\r\n        },\r\n        handleEdit(data){       //编辑\r\n            console.log(data);\r\n            console.log(this.$route.query)\r\n            localStorage.setItem(\"data\",data)\r\n            // 项目树id\r\n            // localStorage.setItem(\"userId\", data.id);\r\n            // axios.post(\"http://192.168.31.104/ydjxzg/mb/goEditTarget.action\",{\r\n            //     \"targetid\":data.id\r\n            // })\r\n            // .then(resp=>{\r\n            //     if(200==resp.data.status){\r\n            //         console.log(\"成功\")\r\n            //     }else{\r\n            //         console.log(\"失败\")\r\n            //     }\r\n            // })\r\n            console.log(data.level);\r\n            console.log(this.level)\r\n            var fid=this.$route.query.id;\r\n            var fdj=this.$route.query.dj;\r\n            var userId = window.sessionStorage.getItem('user_id')\r\n            var userdj = window.sessionStorage.getItem('userdj')\r\n            console.log(userdj)\r\n            console.log(userId)\r\n            console.log(data.creator_id)\r\n            if(userdj == 1 && this.user_id == data.manager_id && data.target_dj == 1){   //用户只能操作自己的项目不能操作兄弟节点项目\r\n                this.$router.push({\r\n                    path: '/edit',\r\n                    name: 'edit',\r\n                    query: {\r\n                        level: data.level,\r\n                        id: data.id,\r\n                        fid:fid,\r\n                        fdj:fdj,\r\n                    }\r\n                })\r\n            }else if(userId == data.creator_id){\r\n                this.$router.push({\r\n                    path: '/edit',\r\n                    name: 'edit',\r\n                    query: {\r\n                        level: data.level,\r\n                        id: data.id,\r\n                        fid:fid,\r\n                        fdj:fdj,\r\n                    }\r\n                })\r\n            }else{          //用户level小于项目节点level不能右键不能操作\r\n                this.$message({\r\n                    message: '您没有权限操作此项目!',\r\n                    type: 'warning'\r\n                });\r\n            }\r\n            \r\n        },\r\n        handleResolve(data){        //分解\r\n            console.log(data)\r\n            console.log(data.level)\r\n            console.log(this.level)\r\n            console.log(this.$route.query)\r\n            var fid=this.$route.query.id;\r\n            var fdj=this.$route.query.dj;\r\n            console.log(fid+fdj)\r\n            var userId = window.sessionStorage.getItem('user_id')\r\n            console.log(userId)\r\n            if(data.target_dj==4 && userId==data.manager_id){\r\n                this.$message({\r\n                    message: '此项目不能分解!',\r\n                    type: 'warning'\r\n                });\r\n            }\r\n            else if(userId==data.manager_id){   //用户只能操作自己的项目不能操作兄弟节点项目\r\n                this.$router.push({\r\n                    path: '/resolve',\r\n                    name: 'resolve',\r\n                    query: {\r\n                        id: data.id,\r\n                        dj:data.target_dj,\r\n                        fid:fid,\r\n                        fdj:fdj,\r\n                    }\r\n                })\r\n            }\r\n            // else if(data.level - this.level >= 1){\r\n            //     this.$router.push({\r\n            //         path: '/resolve',\r\n            //         name: 'resolve',\r\n            //         query: {\r\n            //             level: data.level,\r\n            //             id: data.id,\r\n            //         }\r\n            //     })\r\n            //}\r\n            else{          //用户level小于项目节点level不能右键不能操作\r\n                this.$message({\r\n                    message: '您没有权限操作此项目!',\r\n                    type: 'warning'\r\n                });\r\n            }\r\n        },\r\n        handleDelete(data){     //删除\r\n            console.log(data)\r\n           localStorage.setItem(\"id\",data.id)\r\n            localStorage.setItem(\"dj\",data.target_dj)\r\n            var userId = window.sessionStorage.getItem('user_id')\r\n           \r\n           if(userId==data.creator_id){        //用户level不能越级分解项目节点level\r\n                if(data.target_name){\r\n                    var str = data.target_name.substr(8,12)\r\n                    console.log(str)\r\n                }\r\n                this.del.title = data.title\r\n                this.del.level = data.level\r\n                this.del.id = data.id\r\n                this.dialogDelete = true\r\n            }\r\n            // else if(this.level == data.level && this.brother == data.brother){   //用户只能操作自己的项目不能操作兄弟节点项目\r\n            //     if(data.title){\r\n            //         var br = \"</br>\"\r\n            //         if(data.title.indexOf(\"</br>\") != '-1'){\r\n            //             var Dtitle = data.title.replace(\"</br>\",\"\")\r\n            //         }\r\n            //     }\r\n            //     if(Dtitle){\r\n            //         this.del.title = Dtitle\r\n            //     }else{\r\n            //         this.del.title = data.title\r\n            //     }\r\n            //     this.del.level = data.level\r\n            //     this.del.id = data.id\r\n            //     this.dialogDelete = true\r\n            // }\r\n            else{          //用户level小于项目节点level不能右键不能操作\r\n                this.$message({\r\n                    message: '您没有权限操作此项目!',\r\n                    type: 'warning'\r\n                });\r\n            }\r\n        },\r\n        cancleHandle(){\r\n            this.$refs.handleMenu.style.display = 'none'\r\n        },\r\n        dele(){\r\n            console.log(this.del)\r\n            //根据this.del的level和id向后台发起删除请求，完成后刷新页面\r\n            this.dialogPassword = true\r\n            // var _this = this\r\n            // var id = localStorage.getItem(\"id\");\r\n            // var dj = localStorage.getItem(\"dj\");\r\n            // $.ajax({\r\n            //     type: \"post\",\r\n            //     url: _this.baseUrl + \"/ydjxzg/mb/deleteTarger.action\",\r\n            //     data: {\r\n            //         targetid:id,\r\n            //         targetdj:dj\r\n            //     },\r\n            //     async: false,\r\n            //     dataType: \"json\",\r\n            //     success: function (res) {\r\n            //         console.log(res)\r\n            //         _this.$router.push({path: \"/zgmb\"})\r\n            //     }\r\n            // })\r\n            // this.dialogDelete = false\r\n            // this.$message({\r\n            //     message: '删除成功!',\r\n            //     type: 'success'\r\n            // })\r\n            // this.$router.go(0)\r\n        },\r\n        showPsw(){\r\n            if($(\"#eye\").attr(\"class\") == \"iconfont icon-guanbixianshi\"){\r\n                $(\"#eye\").removeClass(\"icon-guanbixianshi\").addClass(\"icon-xianshi\")\r\n                $(\"#userPsw\").attr(\"type\",\"text\")\r\n            }else{\r\n                $(\"#eye\").removeClass(\"icon-xianshi\").addClass(\"icon-guanbixianshi\")\r\n                $(\"#userPsw\").attr(\"type\",\"password\")\r\n            }\r\n        },\r\n        confirm(){\r\n            if(this.userPassword == '123456'){       //向后台发起请求判断密码是否正确\r\n                this.dialogDelete = false\r\n            var _this = this\r\n            var id = localStorage.getItem(\"id\");\r\n            var dj = localStorage.getItem(\"dj\");\r\n            $.ajax({\r\n                type: \"post\",\r\n                url: _this.baseUrl + \"/ydjxzg/mb/deleteTarger.action\",\r\n                data: {\r\n                    targetid:id,\r\n                    targetdj:dj\r\n                },\r\n                async: false,\r\n                dataType: \"json\",\r\n                success: function (res) {\r\n                    console.log(res)\r\n\r\n                    _this.$message.success('删除成功!');\r\n                    _this.reload()\r\n                    \r\n                }\r\n            })\r\n                // this.$message({\r\n                //     message: '删除成功!',\r\n                //     type: 'success'\r\n                // })\r\n                //this.$router.go(0)\r\n            }else if(this.userPassword == ''){\r\n                this.$message({\r\n                    message: '密码不能为空!',\r\n                    type: 'warning'\r\n                })\r\n            }else{\r\n                this.$message({\r\n                    message: '密码错误!',\r\n                    type: 'warning'\r\n                })\r\n            }\r\n        },\r\n        init(){\r\n            console.log(this.$route.query)  //使用level和id向后台发起请求获取数据赋值给treedata\r\n            var id = this.$route.query.id\r\n            var dj =this.$route.query.dj\r\n            console.log('等级'+dj)\r\n            var _this = this\r\n            $.ajax({\r\n                type: \"post\",\r\n                url: _this.baseUrl + \"/ydjxzg/mb/projectTree.action\",\r\n                data: {'targetid':id},\r\n                async: false,\r\n                dataType: \"json\",\r\n                success: function (res) {\r\n                    console.log(res)\r\n                    if(res.projectTree){\r\n                        res.projectTree.title = res.projectTree.target_name\r\n                        _this.treedata = res.projectTree\r\n                        console.log(_this.treedata)\r\n                    }\r\n                    if(res.targetOne){\r\n                        _this.level = res.targetOne.level\r\n                        _this.brother = res.targetOne.brother\r\n                        console.log(_this.brother)\r\n                    }\r\n                }\r\n            });\r\n            //在init里获取数据\r\n        }\r\n    },\r\n    mounted() {\r\n        this.init()\r\n        // console.log(this.$route.query)  //使用level和id向后台发起请求获取数据赋值给treedata\r\n        // this.level = this.$route.query.level\r\n        var _this = this\r\n        console.log(_this.treedata)\r\n        $('#chart-container').orgchart({\r\n            'data': _this.treedata,\r\n            'nodeContent': 'manager_name',\r\n            'nodeTitle': 'title',\r\n            'createNode': function($node,data){\r\n                // console.log($node,data)\r\n                document.oncontextmenu = function(e){\r\n                    return false;   //取消右键点击的默认事件\r\n                };\r\n                $node.mousedown(function(e) {\r\n                    // console.log(e);\r\n                    if (3 == e.which) {     //右键为3\r\n                        var userId = window.sessionStorage.getItem('user_id')\r\n                        _this.handleData = data\r\n                        _this.$refs.handleMenu.style.display = 'block'\r\n                        if(store.state.isCollapse){\r\n                            _this.$refs.handleMenu.style.left = e.clientX - 235 + 'px'\r\n                        }else{\r\n                            _this.$refs.handleMenu.style.left = e.clientX - 105 + 'px'\r\n                        }\r\n                        _this.$refs.handleMenu.style.top = e.clientY - 90 + 'px'\r\n                        console.log(_this.level,data.level,data.brother,data.creator_id,data.manager_id)\r\n                        if(userId== data.creator_id && userId == data.manager_id ){       //用户level不能越两级操作项目节点level\r\n                            _this.$refs.cur1.style.cursor = 'default'\r\n                            _this.$refs.cur2.style.cursor = 'default'\r\n                            _this.$refs.cur3.style.cursor = 'default'\r\n                        }else if(userId== data.creator_id && userId !== data.manager_id){        //用户level不能越级分解项目节点level\r\n                            _this.$refs.cur1.style.cursor = 'default'\r\n                            _this.$refs.cur2.style.cursor = 'not-allowed'\r\n                            _this.$refs.cur3.style.cursor = 'default'\r\n                        }\r\n                        else if(userId !== data.creator_id && userId == data.manager_id){\r\n\r\n                            _this.$refs.cur1.style.cursor = 'not-allowed'\r\n                            _this.$refs.cur2.style.cursor = 'default'\r\n                            _this.$refs.cur3.style.cursor = 'not-allowed'\r\n                        }\r\n                        else{          //用户level小于项目节点level不能右键不能操作\r\n                            _this.$refs.cur1.style.cursor = 'not-allowed'\r\n                            _this.$refs.cur2.style.cursor = 'not-allowed'\r\n                            _this.$refs.cur3.style.cursor = 'not-allowed'\r\n                        }\r\n                    } else if (1 == e.which) {      //左键为1\r\n                        _this.$refs.handleMenu.style.display = 'none'\r\n                    }\r\n                })\r\n                $node.dblclick(function(){\r\n                    console.log($node,data)\r\n                    if(data.level - _this.level >= 1){       //用户只能查看下N级项目详情\r\n                        _this.$router.push({\r\n                            path: '/detail',\r\n                            name: 'detail',\r\n                            query: {\r\n                                id: data.id,\r\n                            }\r\n                        })\r\n                    }else if(_this.level == data.level && _this.brother == data.brother){   //用户只能查看自己的项目不能查看兄弟节点项目\r\n                        _this.$router.push({\r\n                            path: '/detail',\r\n                            name: 'detail',\r\n                            query: {\r\n                                id: data.id,\r\n                            }\r\n                        })\r\n                    }else{          //用户不能查看上级项目详情\r\n                        _this.$message.warning({message: '您没有权限查看此项目！'})\r\n                    }\r\n                })\r\n                var secondMenuIcon = $('<i>', {\r\n                    'class': 'fa fa-info-circle second-menu-icon',\r\n                    click: function() {\r\n                        $(this).siblings('.second-menu').toggle(\"fast\");\r\n                    }\r\n                });\r\n                var secondMenu = '<div class=\"second-menu titleInfo\"><p>'+ data.title +'</p></div>';\r\n                $node.append(secondMenuIcon).append(secondMenu);\r\n            }\r\n        });\r\n        $('.card').scroll(function(){\r\n            _this.$refs.handleMenu.style.display = 'none'\r\n        })\r\n    },\r\n    watch: {\r\n        '$route':{\r\n            handler(route){\r\n                var _this = this\r\n                console.log(route,_this)\r\n                if(route.name == 'tree'){\r\n                     _this.reload()\r\n                }\r\n            },\r\n            deep: true\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style>\r\n#tree{\r\n    width: 100%;\r\n    height: 100%;\r\n    margin-top: 20px;\r\n}\r\n#tree .el-row{\r\n    padding: 0 10px 10px;\r\n    overflow: initial;\r\n}\r\n#tree .el-row .el-col-24 .el-card{\r\n    overflow-x: initial;\r\n}\r\n#tree .el-row .el-col-24 .el-card__body{\r\n    overflow-x: initial;\r\n}\r\n#tree .el-row .el-col-24 .title{\r\n    height: 50px;\r\n    line-height: 50px;\r\n    text-align: center;\r\n}\r\n#tree .el-row .el-col-24 .title i{\r\n    display: none;\r\n}\r\n#tree .el-row .el-col-24 .titleInfo{\r\n    border-radius: 4px;\r\n    font-size: 14px;\r\n    text-align: left;\r\n    top: -25px;\r\n    padding: 5px 10px;\r\n}\r\n#tree .handleMenu{\r\n    display: none;\r\n    width: 150px;\r\n    font-size: 14px;\r\n    line-height: 40px;\r\n    padding: 10px 0;\r\n    background: #ffffff;\r\n    border-radius: 4px;\r\n    position: absolute;\r\n    /* left: 0px;\r\n    top: 0px; */\r\n    box-shadow: 0px 0px 10px #666666;\r\n    z-index: 1000;\r\n}\r\n#tree .handleMenu span{\r\n    display: block;\r\n    text-align: center;\r\n    cursor: default;\r\n}\r\n#tree .handleMenu span:hover{\r\n    background: #eeeeee;\r\n}\r\n.el-dialog .psw{\r\n    position: relative;\r\n}\r\n.el-dialog #eye{\r\n    position: absolute;\r\n    right: 8px;\r\n    top: 12px;\r\n}\r\n.delTips .el-dialog__body{\r\n    padding-left: 40px;\r\n    padding-right: 40px;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/projectTree.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"tree\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-card',{ref:\"card\",staticClass:\"card\",attrs:{\"shadow\":\"always\"},nativeOn:{\"click\":function($event){return _vm.cancleHandle()}}},[_c('div',{attrs:{\"id\":\"chart-container\"}}),_vm._v(\" \"),_c('div',{ref:\"handleMenu\",staticClass:\"handleMenu\"},[_c('span',{ref:\"cur1\",staticClass:\"edit\",on:{\"click\":function($event){return _vm.handleEdit(_vm.handleData)}}},[_vm._v(\"编辑项目信息\")]),_vm._v(\" \"),_c('span',{ref:\"cur2\",staticClass:\"resolve\",on:{\"click\":function($event){return _vm.handleResolve(_vm.handleData)}}},[_vm._v(\"分解项目节点\")]),_vm._v(\" \"),_c('span',{ref:\"cur3\",staticClass:\"delete\",on:{\"click\":function($event){return _vm.handleDelete(_vm.handleData)}}},[_vm._v(\"删除项目节点\")])])])],1)],1),_vm._v(\" \"),_c('el-dialog',{staticClass:\"delTips\",attrs:{\"title\":\"谨慎操作提示\",\"visible\":_vm.dialogDelete,\"top\":\"30vh\",\"width\":\"300px\"},on:{\"update:visible\":function($event){_vm.dialogDelete=$event}}},[_c('el-dialog',{staticClass:\"delTips\",attrs:{\"width\":\"300px\",\"title\":\"请输入登录密码以确认\",\"visible\":_vm.dialogPassword,\"top\":\"30vh\",\"append-to-body\":\"\"},on:{\"update:visible\":function($event){_vm.dialogPassword=$event}}},[_c('div',{staticClass:\"psw\"},[_c('el-input',{attrs:{\"type\":\"password\",\"id\":\"userPsw\",\"placeholder\":\"请输入您的登录密码\"},model:{value:(_vm.userPassword),callback:function ($$v) {_vm.userPassword=$$v},expression:\"userPassword\"}}),_vm._v(\" \"),_c('span',{staticClass:\"iconfont icon-guanbixianshi\",attrs:{\"id\":\"eye\"},on:{\"click\":function($event){return _vm.showPsw()}}})],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogPassword = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.confirm()}}},[_vm._v(\"确 认\")])],1)]),_vm._v(\" \"),_c('span',[_vm._v(\"你确定要删除“\"),_c('b',[_vm._v(_vm._s(_vm.del.title))]),_vm._v(\"”此项目吗？其子项目也将会随之删除！\")]),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogDelete = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.dele()}}},[_vm._v(\"删 除\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-9b70817e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/projectTree.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-9b70817e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./projectTree.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./projectTree.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./projectTree.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9b70817e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./projectTree.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/projectTree.vue\n// module id = null\n// module chunks = ","exports.endianness = function () { return 'LE' };\n\nexports.hostname = function () {\n    if (typeof location !== 'undefined') {\n        return location.hostname\n    }\n    else return '';\n};\n\nexports.loadavg = function () { return [] };\n\nexports.uptime = function () { return 0 };\n\nexports.freemem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.totalmem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.cpus = function () { return [] };\n\nexports.type = function () { return 'Browser' };\n\nexports.release = function () {\n    if (typeof navigator !== 'undefined') {\n        return navigator.appVersion;\n    }\n    return '';\n};\n\nexports.networkInterfaces\n= exports.getNetworkInterfaces\n= function () { return {} };\n\nexports.arch = function () { return 'javascript' };\n\nexports.platform = function () { return 'browser' };\n\nexports.tmpdir = exports.tmpDir = function () {\n    return '/tmp';\n};\n\nexports.EOL = '\\n';\n\nexports.homedir = function () {\n\treturn '/'\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_os-browserify@0.3.0@os-browserify/browser.js\n// module id = mZiP\n// module chunks = 4 6"],"sourceRoot":""}