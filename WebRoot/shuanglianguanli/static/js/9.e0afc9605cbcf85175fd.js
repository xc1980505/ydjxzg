webpackJsonp([9],{"5RGg":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("wtEF");var l={name:"edit",inject:["reload"],data:function(){return{input:"",title:"编辑诊改工作规划",edit:{title:"规划项目编辑",level:"4",id:"1",mc:"",important:"",quanzhong:"5",leader:"李老师",sj:{gh:"上级规划",mc:""},start:"",end:"",jfys:2.2,fzr:"",fid:"",cyr:[],zgzb:"",zgzbID:"",mark:"1",zgmb:"10000人",jd:30,jj:"",dj:""},rules:{khzb:[{required:!0,message:"请输入考核指标",trigger:"change"}],start:[{required:!0,message:"请选择开始时间",trigger:"change"}],end:[{required:!0,message:"请选择结束时间",trigger:"change"}]},options101:[],restaurants:[],restaurants1:[],options:[],option1:[{value:"1",label:"＞"},{value:"2",label:"≥"},{value:"3",label:"＜"},{value:"4",label:"≤"},{value:"5",label:"＝"},{value:"6",label:"≠"}],option2:[{value:"1",label:"重要"},{value:"2",label:"普通"},{value:"3",label:"暂缓"}],option3:[{value:"0",label:"0"},{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"}]}},methods:{querySearch:function(e,t){var a=this.restaurants;t(e?a.filter(this.createFilter(e)):a)},queSearch:function(e,t){var a=this.restaurants1;t(e?a.filter(this.createFilter(e)):a)},fzr:function(e){localStorage.setItem("fid",e),this.edit.fid=e.id,console.log(e.id)},jjcd:function(e){localStorage.setItem("jjcd",e)},kssj:function(e){console.log(e);var t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();console.log(t),localStorage.setItem("newDate1",t)},jssj:function(e){console.log(e);var t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();console.log(t),localStorage.setItem("newDate2",t)},fh:function(e){localStorage.setItem("fh",e)},cyz:function(e){localStorage.setItem("cyz",e)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},loadAll:function(){return[{value:"就业率",label:"1"},{value:"双师型比例",label:"2"},{value:"新生增长率",label:"3"}]},handleSelect:function(e){this.edit.zgzbID=e.id,console.log("kankan"+e)},keep:function(){var e=this;this.$confirm("确认保存吗？").then(function(t){if(e.edit.start&&e.edit.end){var a=new Date(e.edit.start),l=new Date(e.edit.end),i=a.getMonth(),s=a.getDate(),r=l.getMonth(),n=l.getDate();console.log(i,s),i+1<10?i="0"+(i+1):i+=1,s<10&&(s="0"+s),r+1<10?r="0"+(r+1):r+=1,n<10&&(n="0"+n),e.edit.start=a.getFullYear()+"-"+i+"-"+s,e.edit.end=l.getFullYear()+"-"+r+"-"+n}e.$route.query.fid,e.$route.query.fdj;var o=e,c=e.edit.cyr.toString();console.log(c);var d=localStorage.getItem("id3"),u=e.$refs.ghmc.value,g=e.edit.fid,f=e.$refs.jf.value,m=e.edit.important,p=e.$refs.qz.value,h=e.$refs.xmjj.value,v=e.edit.zgzbID;console.log("asdasdsaf"+v);var b=e.edit.mark,_=e.$refs.mb.value,z=e.edit.start,y=e.edit.end;$.ajax({type:"post",url:e.baseUrl+"/ydjxzg/mb/editTarget.action",data:{userlist:c,Id:d,target_name:u,manager_id:g,Funds:f,Importancedj:m,Weight:p,start_time:z,end_time:y,target_info:h,target_stand:v,target_stand_contion:b,target_stand_info:_},dataType:"json",success:function(e){console.log(o.edit),o.$message.success("保存成功！"),o.$router.push({path:"/zgmb"})}})}).catch(function(t){e.$message({message:"已取消",type:"warning"})})},cancel:function(){var e=this;this.$confirm("确认返回到上一页吗？").then(function(t){e.$router.go(-1)}).catch(function(e){})},init:function(){this.restaurants=this.loadAll(),console.log(this.$route.query),localStorage.setItem("id3",this.$route.query.id),this.edit.level=this.$route.query.level,this.edit.id=this.$route.query.id,1==this.edit.level?this.title="编辑诊改工作规划":2==this.edit.level?this.title="编辑专项工作规划":3==this.edit.level?this.title="编辑项目清单":4==this.edit.level&&(this.title="编辑工作任务")}},mounted:function(){this.init();var e=[],t=[],a=this,l=localStorage.getItem("id3");console.log(l),$.ajax({type:"post",url:this.baseUrl+"/ydjxzg/mb/goEditTarget.action",data:{targetid:l},dataType:"json",success:function(l){if(console.log(l),l.khzb){for(var i=0;i<l.khzb.length;i++)e.push({id:l.khzb[i].id,value:l.khzb[i].zbmc});console.log(e)}if(l.userlist){for(i=0;i<l.userlist.length;i++)t.push({id:l.userlist[i].user_id,value:l.userlist[i].name});console.log(t)}a.edit.sj.mc=l.target.parent_name,a.edit.leader=0==l.target.parent_id?"无":l.target.upManager,a.edit.mc=l.target.target_name,a.options=l.userlist,console.log(a.options),a.edit.fzr=l.target.manager_name,a.edit.fid=l.target.manager_id,a.edit.jfys=l.target.funds,a.edit.important=l.target.importancedj,a.input=l.target.weight,a.edit.start=l.target.start_time,a.edit.end=l.target.end_time;for(var s=[],r=0;r<l.target.userEntity.length;r++)-1==s.indexOf(l.target.userEntity[r].user_id)&&s.push(l.target.userEntity[r].user_id);a.edit.cyr=s,console.log(a.edit.cyr,"参与人"),a.edit.mark=l.target.target_stand_contion,a.edit.zgzb=l.target.target_stand_name,a.edit.zgzbID=l.target.target_stand,a.edit.zgmb=l.target.target_stand_info,a.edit.jj=l.target.target_info,a.options101=l.khzb,a.edit.dj=l.target.target_dj}}),this.restaurants=e,this.restaurants1=t},watch:{$route:{handler:function(e){console.log(e,this),"edit"==e.name&&this.init()},deep:!0}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"edit"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-card",{attrs:{shadow:"always"}},[a("div",{staticClass:"title"},[a("span",{staticClass:"iconfont icon-icon-up"}),e._v(e._s(e.title))]),e._v(" "),a("el-form",{attrs:{model:e.edit}},[a("div",{staticClass:"sjgh"},[a("div",{staticClass:"sj"},[a("span",{staticClass:"left"},[e._v("上级规划：")]),a("p",{staticClass:"right"},[e._v(e._s(e.edit.sj.mc))])]),e._v(" "),a("div",{staticClass:"sj"},[a("span",{staticClass:"left"},[e._v("上级领导：")]),a("p",{staticClass:"right"},[e._v(e._s(e.edit.leader))])])]),e._v(" "),a("el-form-item",{attrs:{label:"规划名称："}},[a("el-input",{ref:"ghmc",attrs:{type:"textarea",resize:"none",autosize:"",placeholder:"请输入规划名称"},model:{value:e.edit.mc,callback:function(t){e.$set(e.edit,"mc",t)},expression:"edit.mc"}})],1),e._v(" "),a("div",{staticClass:"form_item"},[a("el-form-item",{staticClass:"fzr",attrs:{label:"负责人："}},[a("el-col",{staticStyle:{width:"100%",padding:"0"},attrs:{span:12}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.queSearch,placeholder:"请选择负责人",clearable:""},on:{select:e.fzr},model:{value:e.edit.fzr,callback:function(t){e.$set(e.edit,"fzr",t)},expression:"edit.fzr"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"jfys",attrs:{label:"经费预算："}},[a("el-input",{ref:"jf",attrs:{type:"number",placeholder:"请输入金额",autocomplete:"off"},model:{value:e.edit.jfys,callback:function(t){e.$set(e.edit,"jfys",t)},expression:"edit.jfys"}},[a("template",{slot:"append"},[e._v("万元")])],2)],1),e._v(" "),a("el-form-item",{staticClass:"important",attrs:{label:"紧急程度："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择项目重要程度"},on:{change:e.jjcd},model:{value:e.edit.important,callback:function(t){e.$set(e.edit,"important",t)},expression:"edit.important"}},e._l(e.option2,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"quanzhong",attrs:{label:"分解权重："}},[a("el-input",{ref:"qz",attrs:{placeholder:"请输入权重大小",onkeyup:"this.value=this.value.replace(/[^\\-?\\d.]/g,'')"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)],1),e._v(" "),a("div",{staticClass:"form_item"},[a("el-form-item",{staticClass:"starrttime",attrs:{label:"开始时间："}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择开始日期"},model:{value:e.edit.start,callback:function(t){e.$set(e.edit,"start",t)},expression:"edit.start"}})],1),e._v(" "),a("el-form-item",{staticClass:"endtime",attrs:{label:"结束时间："}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择结束日期"},model:{value:e.edit.end,callback:function(t){e.$set(e.edit,"end",t)},expression:"edit.end"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"参与人："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","default-first-option":"",placeholder:"请选择参与人"},on:{change:e.cyz},model:{value:e.edit.cyr,callback:function(t){e.$set(e.edit,"cyr",t)},expression:"edit.cyr"}},e._l(e.options,function(t){return a("el-option",{key:t.user_id,attrs:{label:t.name,value:t.user_id,disabled:t.name===e.edit.fzr}})}),1)],1),e._v(" "),a("div",{staticClass:"khbz"},[a("el-form-item",{staticStyle:{width:"33%","margin-right":"35px"},attrs:{label:"考核指标："}},[a("el-col",{staticStyle:{width:"100%",padding:"0"},attrs:{span:12}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入内容",clearable:""},on:{select:e.handleSelect},model:{value:e.edit.zgzb,callback:function(t){e.$set(e.edit,"zgzb",t)},expression:"edit.zgzb"}})],1)],1),e._v(" "),a("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"诊改目标："}},[a("div",{staticClass:"zhengaimubiao"},[a("el-select",{staticClass:"mb_mark",attrs:{placeholder:"请选择"},on:{change:e.fh},model:{value:e.edit.mark,callback:function(t){e.$set(e.edit,"mark",t)},expression:"edit.mark"}},e._l(e.option1,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{ref:"mb",staticClass:"mb_ipt1",attrs:{placeholder:"请输入目标",autocomplete:"off"},model:{value:e.edit.zgmb,callback:function(t){e.$set(e.edit,"zgmb",t)},expression:"edit.zgmb"}})],1)])],1),e._v(" "),a("el-form-item",{attrs:{label:"规划简介："}},[a("el-input",{ref:"xmjj",attrs:{type:"textarea",autosize:{minRows:6},placeholder:"请输入简介内容"},model:{value:e.edit.jj,callback:function(t){e.$set(e.edit,"jj",t)},expression:"edit.jj"}})],1)],1),e._v(" "),a("div",{staticClass:"edit-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.keep()}}},[e._v("保 存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("返 回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var s=a("C7Lr")(l,i,!1,function(e){a("t/O1")},null,null);t.default=s.exports},"t/O1":function(e,t){}});
//# sourceMappingURL=9.e0afc9605cbcf85175fd.js.map