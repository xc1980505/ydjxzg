webpackJsonp([13],{aHPk:function(e,t){},"b+J6":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={data:function(){return{phoneCodes:1.1111111111111111e35,checkCode:"点击获取验证码",getPhoneCode:"获取手机验证码",ruleForm:{picLyanzhengma:"",user_name:"",user_phone:"",shouji:""},rules:{user_name:[],user_phone:[{validator:function(e,t,s){if(!t)return s(new Error("手机号不能为空"));var r=/^1[3|4|5|7|8][0-9]\d{8}$/;if(console.log(r.test(t)),!r.test(t))return s(new Error("请输入正确的手机号"));s()},trigger:"blur"}]}}},methods:{phoneCode:function(){var e=this;$.ajax({type:"POST",url:this.baseUrl+"/ydjxzg/log/getyanzheng.action",data:{},dataType:"json",success:function(t){console.log(t,"验证码"),e.phoneCodes=t.mess,e.getPhoneCode=t.mess},error:function(e){console.log("请求失败！")}})},getCode:function(){return this.ruleForm.user_name?this.ruleForm.user_phone?/^1[3|4|5|7|8][0-9]\d{8}$/.test(this.ruleForm.user_phone)?this.ruleForm.picLyanzhengma?this.ruleForm.picLyanzhengma.toUpperCase()!=this.checkCode?(this.$message.error("验证码不正确！"),!1):"点击获取验证码"==this.ruleForm.picLyanzhengma?(this.$message.error("验证码不正确！"),!1):(this.phoneCode(),void this.$message.success("验证成功，已向您的手机发送短信验证，请注意查收！")):(this.$message.error("验证码不能为空！"),!1):(this.$message.error("请输入正确的手机号！"),!1):(this.$message.error("手机号不能为空！"),!1):(this.$message.error("账号不能为空！"),!1)},check:function(){var e=this;this.ruleForm.shouji==this.phoneCodes?(sessionStorage.setItem("linshiuser",this.ruleForm.user_name),$.ajax({type:"POST",url:this.baseUrl+"/ydjxzg/log/getpass.action",data:{username:this.ruleForm.user_name,mobile:this.ruleForm.user_phone},dataType:"json",success:function(t){if(!t.mess)return e.$message.error("验证失败！"),!1;e.$message.success("验证成功！"),setTimeout(function(){e.$router.push({path:"/xiugai",name:"xiugai"})},1e3)}})):this.$message.error("验证不正确！")},createCode:function(){for(var e="",t=new Array(0,1,2,3,4,5,6,7,8,9,"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"),s=0;s<4;s++){e+=t[Math.floor(36*Math.random())]}this.checkCode=e},checkLpicma:function(){if(this.ruleForm.picLyanzhengma.toUpperCase(),""==this.ruleForm.picLyanzhengma)$(".login_content1 span:eq(2)").text("请输入验证码"),$(".login_content1 span:eq(2)").removeClass("disappear");else{if(this.ruleForm.picLyanzhengma.toUpperCase()==this.checkCode)return $(".login_content1 span:eq(2)").addClass("disappear"),$(".login_content1 span:eq(2)").text("请输入验证码"),!0;console.log(this.ruleForm.picLyanzhengma.toUpperCase()),$(".login_content1 span:eq(2)").text("验证码不正确"),$(".login_content1 span:eq(2)").removeClass("disappear"),this.createCode(),this.ruleForm.picLyanzhengma=""}}}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"wangjimima"}},[e._m(0),e._v(" "),s("div",{staticClass:"input_info"},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"请输入账号:",prop:"user_name"}},[s("el-input",{model:{value:e.ruleForm.user_name,callback:function(t){e.$set(e.ruleForm,"user_name",t)},expression:"ruleForm.user_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"手机号:",prop:"user_phone"}},[s("el-input",{model:{value:e.ruleForm.user_phone,callback:function(t){e.$set(e.ruleForm,"user_phone",e._n(t))},expression:"ruleForm.user_phone"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"验证码:"}},[s("el-input",{attrs:{placeholder:"请输入验证码"},on:{blur:e.checkLpicma},model:{value:e.ruleForm.picLyanzhengma,callback:function(t){e.$set(e.ruleForm,"picLyanzhengma",t)},expression:"ruleForm.picLyanzhengma"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"验证码:"}},[s("el-input",{attrs:{placeholder:"手机验证码"},on:{blur:e.checkLpicma},model:{value:e.ruleForm.shouji,callback:function(t){e.$set(e.ruleForm,"shouji",t)},expression:"ruleForm.shouji"}})],1)],1)],1),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.checkCode,expression:"checkCode"}],staticClass:"verification1",attrs:{type:"button",id:"code"},domProps:{value:e.checkCode},on:{click:e.createCode,input:function(t){t.target.composing||(e.checkCode=t.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.getPhoneCode,expression:"getPhoneCode"}],staticClass:"verification2",attrs:{type:"button",id:"code"},domProps:{value:e.getPhoneCode},on:{click:e.getCode,input:function(t){t.target.composing||(e.getPhoneCode=t.target.value)}}}),e._v(" "),s("el-button",{staticClass:"check",attrs:{type:"primary",plain:""},on:{click:e.check}},[e._v("开始验证")])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title_info"},[t("div",{staticClass:"title_img_div"},[t("img",{staticClass:"title_img",attrs:{src:"http://cdn.xqit.net/zg/img/login_logo.png",alt:""}})]),this._v(" "),t("div",{staticClass:"title_span_div"},[t("span",{staticClass:"title_span_div_span_01"},[this._v("玉带职业技术学校教学诊断与改进系统")]),this._v(" "),t("br"),this._v(" "),t("span",{staticClass:"title_span_div_span_02"},[this._v("密码找回")])])])}]};var n=s("C7Lr")(r,o,!1,function(e){s("aHPk")},null,null);t.default=n.exports}});
//# sourceMappingURL=13.da712c3c9986ff2990d0.js.map