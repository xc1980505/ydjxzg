webpackJsonp([1],{"162o":function(e,t,a){(function(e){var l=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function n(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new n(i.call(setTimeout,l,arguments),clearTimeout)},t.setInterval=function(){return new n(i.call(setInterval,l,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(l,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},a("mypn"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,a("DuR2"))},fRmy:function(e,t){},jBHR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mtWM"),i=a.n(l),n=(a("162o"),{inject:["reload"],name:"quanxian",data:function(){return{data_user_id:null,defaultPropsroles:{label:"role_name"},deleteKind:!1,deleteFenzuHezi:null,sanzu:"first",tree:[],tree003:[],defaultProps003:{children:"permis",label:"permis_name",id:"permis_id"},formLabelWidth:"120px",renyuanChakan:{},renyuanChakanVisible:!1,tabPosition:"left",currentPage4:1,pagesize:5,currpage:1,currentPage2:1,pagesize2:5,currpage2:1,total:null,total2:null,index:!0,dialogFormVisible:!1,dialogFormVisible2:!1,dialogFormVisible03:!1,dialogVisible:!1,activeName:"first",activeName2:"first",activeName3:"first",ID:"",name:"",miaoshu:"",quanxian:[],quanxian01:null,tableData:[],tableData2:[],options:[],value11:[],options2:[],value12:[],form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},defaultProps3:{children:"permis",label:"permis_name"},data3:[],defaultProps2:{label:"role_name"},defaultProps:{children:"permis",label:"permis_name",id:"id"}}},methods:{ensureXiugai:function(){var e=this.$refs.treedata3.getCheckedKeys().toString(),t=this;$.ajax({type:"POST",url:this.baseUrl+"/ydjxzg/ht/updatefz.action",data:{user_id:this.data_user_id,role_id:e},dataType:"json",success:function(e){t.$message.success("修改成功！"),t.getUsers()},error:function(e){t.$message.error("修改失败！")}}),this.dialogFormVisible2=!1},xiugaiRenyuanFenzu:function(e){var t=this;this.data_user_id=e.user_id,this.$nextTick(function(){for(var a=[],l=0;l<e.roles.length;l++)a.push(e.roles[l].role_id);t.$refs.treedata3.setCheckedKeys(a)}),console.log(e),this.dialogFormVisible2=!0},deleteFenzu:function(e){this.deleteKind=!0,this.deleteFenzuHezi=e},jueseDelete:function(){var e=this,t=this.deleteFenzuHezi;console.log(t,"shanchu"),$.ajax({type:"POST",url:this.baseUrl+"/ydjxzg/ht/deletezu.action",data:{role_id:t.role_id},dataType:"json",success:function(t){console.log(t),e.getTabbleData(),e.$message.success(t.mess),e.deleteKind=!1}})},confirmXiugai:function(){var e=this,t=this;this.$nextTick(function(){var a=e.$refs.tree04.getCheckedKeys();console.log(a,"perper"),e.quanxian01=a.toString(),$.ajax({type:"POST",url:e.baseUrl+"/ydjxzg/ht/updatezu.action",data:{role_id:e.ID,role_name:e.name,role_code:e.miaoshu,permis_id:e.quanxian01||[]},datatype:"json",success:function(e){console.log(e),t.$message.success("修改成功！"),t.getTabbleData()},error:function(e){t.$message.error("修改失败！如有疑问请联系管理员"),console.log(e)}})}),this.dialogFormVisible03=!1},xiugaiRenyuanGuanli:function(e){var t=this;console.log(e),this.ID=e.role_id,this.name=e.role_name,this.miaoshu=e.role_code;for(var a=[],l=0;l<e.permis.length;l++){var i=e.permis[l].permis_id;a.push(i)}this.$nextTick(function(){t.$refs.tree04.setCheckedKeys(a)}),this.dialogFormVisible03=!0},addJuese:function(){this.dialogFormVisible=!1;var e=this.$refs.tree03.getCheckedKeys().toString();if(""==this.form.name)return this.$message.error("角色名不能为空"),!1;if(""==this.form.region)return this.$message.error("角色名描述不能为空"),!1;console.log(this.form.region,"juese");var t=this;$.ajax({type:"POST",url:this.baseUrl+"/ydjxzg/ht/insertzu.action",data:{role_name:this.form.name,role_code:this.form.region,permis_id:e},dataType:"json",success:function(e){t.form.name="",t.form.region="",t.$message.success(e.mess),t.getTabbleData()}})},handleClick:function(e){console.log(e),this.ID=e.role_id,this.name=e.role_name,this.miaoshu=e.role_code,this.quanxian=e.permis,0==e.permis.length?this.index=!1:this.index=!0,this.dialogVisible=!0},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pagesize=e},handleCurrentChange:function(e){console.log("当前页: "+e),this.currpage=e},handleSizeChange2:function(e){console.log("每页 "+e+" 条"),this.pagesize2=e},handleCurrentChange2:function(e){console.log("当前页: "+e),this.currpage2=e},jsm:function(e){console.log(e),localStorage.setItem("e",e)},yhm:function(e){console.log(e),localStorage.setItem("se",e)},handleClick2:function(e,t){console.log(e,t)},handleClick3:function(e,t){console.log(e,t)},handleClick5:function(e,t){console.log(e,t)},handleClick12:function(e){console.log(e),this.renyuanChakan=e,this.renyuanChakanVisible=!0},handleNodeClick:function(e){console.log(e)},query:function(){var e=localStorage.getItem("e");console.log(e)},query2:function(){var e=localStorage.getItem("se");console.log(e)},handleClose:function(e){e()},getUsers:function(){var e=this;i.a.post(this.baseUrl+"/ydjxzg/ht/getUsers.action").then(function(t){console.log(t),e.tableData2=t.data.users,e.total2=t.data.users.length,e.options2=t.data.users})},getTreeList:function(){var e=this;i.a.post(this.baseUrl+"/ydjxzg/ht/selectpermis.action").then(function(t){console.log(t,"gettreelist"),e.tree=t.data.permis,e.tree003=t.data.permis})},getTabbleData:function(){var e=this;i.a.post(this.baseUrl+"/ydjxzg/ht/sleroles.action").then(function(t){console.log(t,"getTabbleData"),e.tableData=t.data.role,e.options=t.data.role,e.data3=t.data.role,e.total=t.data.role.length})}},created:function(){this.getUsers(),this.getTreeList(),this.getTabbleData()}}),s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tabs"},[a("el-tabs",{staticStyle:{height:"100%"},attrs:{"tab-position":e.tabPosition},model:{value:e.sanzu,callback:function(t){e.sanzu=t},expression:"sanzu"}},[a("el-tab-pane",{attrs:{label:"人员管理",name:"first"}},[a("div",{staticClass:"search"},[a("span",[e._v("用户名：")]),e._v(" "),a("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},on:{change:e.yhm},model:{value:e.value12,callback:function(t){e.value12=t},expression:"value12"}},e._l(e.options2,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}),1),e._v(" "),a("el-button",{staticClass:"btn1",attrs:{type:"success"},on:{click:e.query2}},[e._v("查询")])],1),e._v(" "),a("div",{staticClass:"table2"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData2.slice((e.currpage2-1)*e.pagesize2,e.currpage2*e.pagesize2),stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"dept_name",label:"部门名",align:"center",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名字",align:"center",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号",align:"center",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"280",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",prop:"roles",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick12(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.xiugaiRenyuanFenzu(t.row)}}},[e._v("修改分组")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage2,"page-sizes":[2,3,5,7],"page-size":e.pagesize2,layout:"total, sizes, prev, pager, next, jumper",total:e.total2},on:{"size-change":e.handleSizeChange2,"current-change":e.handleCurrentChange2}})],1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"分组管理",name:"second"}},[a("div",{staticClass:"search"},[a("span",[e._v("分组名：")]),e._v(" "),a("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},on:{change:e.jsm},model:{value:e.value11,callback:function(t){e.value11=t},expression:"value11"}},e._l(e.options,function(e){return a("el-option",{key:e.role_id,attrs:{label:e.role_name,value:e.role_id}})}),1),e._v(" "),a("el-button",{staticClass:"btn1",attrs:{type:"success"},on:{click:e.query}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加")])],1),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currpage-1)*e.pagesize,e.currpage*e.pagesize),stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"role_id",label:"分组ID",align:"center",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"role_name",label:"分组名",align:"center",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"role_code",label:"分组描述",align:"center",width:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.xiugaiRenyuanGuanli(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteFenzu(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage4,"page-sizes":[2,3,5,7],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"权限管理",name:"third"}},[a("div",{staticStyle:{height:"500px",overflow:"scroll"}},[a("el-tabs",{on:{"tab-click":e.handleClick3},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"所有权限",name:"first"}},[a("el-tree",{staticClass:"props",attrs:{data:e.tree,props:e.defaultProps,"default-expand-all":""},on:{"node-click":e.handleNodeClick}})],1)],1)],1)])],1),e._v(" "),a("el-dialog",{attrs:{title:"添加角色",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"角色名：","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"input",attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色描述：","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"input",attrs:{"auto-complete":"off"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}})],1)],1),e._v(" "),a("div",{staticClass:"tab"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick2},model:{value:e.activeName2,callback:function(t){e.activeName2=t},expression:"activeName2"}},[a("el-tab-pane",{staticClass:"tree",attrs:{label:"角色权限项",name:"first"}},[a("el-tree",{ref:"tree03",attrs:{data:e.tree003,"show-checkbox":"","default-expand-all":"","node-key":"permis_id","highlight-current":"",props:e.defaultProps003}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addJuese}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加组",visible:e.dialogFormVisible03,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogFormVisible03=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"组名：","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"input",attrs:{"auto-complete":"off"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"组描述：","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"input",attrs:{"auto-complete":"off"},model:{value:e.miaoshu,callback:function(t){e.miaoshu=t},expression:"miaoshu"}})],1)],1),e._v(" "),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick2},model:{value:e.activeName2,callback:function(t){e.activeName2=t},expression:"activeName2"}},[a("el-tab-pane",{staticClass:"tree",attrs:{label:"组权限项",name:"first"}},[a("el-tree",{ref:"tree04",attrs:{data:e.tree003,"show-checkbox":"","default-expand-all":"","node-key":"permis_id","highlight-current":"",props:e.defaultProps003}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible03=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmXiugai}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("ul",{staticClass:"handleClose"},[a("li",[e._v("组ID： "+e._s(e.ID))]),e._v(" "),a("li",[e._v("组名： "+e._s(e.name))]),e._v(" "),a("li",[e._v("组描述： "+e._s(e.miaoshu))]),e._v(" "),a("li",[a("span",[a("span",[e._v("权限： ")]),e._v(" "),e.index?a("ul",e._l(e.quanxian,function(t,l){return a("li",{key:l},[e._v(e._s(t.permis_name))])}),0):a("ul",[a("li",[e._v("无")])])])])])]),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.deleteKind,width:"30%"},on:{"update:visible":function(t){e.deleteKind=t}}},[a("span",[e._v("确定要删除该分组吗？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.deleteKind=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.jueseDelete}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"详细信息",visible:e.renyuanChakanVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.renyuanChakanVisible=t}}},[a("ul",{staticClass:"handleClose"},[a("li",[e._v("姓名： "+e._s(e.renyuanChakan.name))]),e._v(" "),a("li",[e._v("职位： "+e._s(e.renyuanChakan.zw))]),e._v(" "),a("li",[e._v("性别： "+e._s(1==e.renyuanChakan.gender?"男":"女"))]),e._v(" "),a("li",[e._v("手机号： "+e._s(e.renyuanChakan.mobile))]),e._v(" "),a("li",[e._v("微信号： "+e._s(e.renyuanChakan.wx_num))]),e._v(" "),a("li",[e._v("邮箱： "+e._s(e.renyuanChakan.email))]),e._v(" "),a("h3",{staticStyle:{"margin-top":"10px"}},[e._v("所在分组:")]),e._v(" "),a("el-tree",{attrs:{data:e.renyuanChakan.roles,props:e.defaultPropsroles,"node-key":"role_id"}})],1)]),e._v(" "),a("el-dialog",{attrs:{title:"更改角色分组",visible:e.dialogFormVisible2},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick5},model:{value:e.activeName3,callback:function(t){e.activeName3=t},expression:"activeName3"}},[a("el-tab-pane",{attrs:{label:"角色权限项",name:"first"}},[a("el-tree",{ref:"treedata3",attrs:{data:e.data3,"show-checkbox":"","node-key":"role_id","highlight-current":"",props:e.defaultProps2}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible2=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.ensureXiugai}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(n,s,!1,function(e){a("fRmy")},"data-v-36e6cb6c",null);t.default=o.exports},mypn:function(e,t,a){(function(e,t){!function(e,a){"use strict";if(!e.setImmediate){var l,i,n,s,o,r=1,c={},u=!1,d=e.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(e);m=m&&m.setTimeout?m:e,"[object process]"==={}.toString.call(e.process)?l=function(e){t.nextTick(function(){p(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,a=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=a,t}}()?e.MessageChannel?((n=new MessageChannel).port1.onmessage=function(e){p(e.data)},l=function(e){n.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,l=function(e){var t=d.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):l=function(e){setTimeout(p,0,e)}:(s="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&p(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),l=function(t){e.postMessage(s+t,"*")}),m.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),a=0;a<t.length;a++)t[a]=arguments[a+1];var i={callback:e,args:t};return c[r]=i,l(r),r++},m.clearImmediate=f}function f(e){delete c[e]}function p(e){if(u)setTimeout(p,0,e);else{var t=c[e];if(t){u=!0;try{!function(e){var t=e.callback,l=e.args;switch(l.length){case 0:t();break;case 1:t(l[0]);break;case 2:t(l[0],l[1]);break;case 3:t(l[0],l[1],l[2]);break;default:t.apply(a,l)}}(t)}finally{f(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,a("DuR2"),a("W2nU"))}});
//# sourceMappingURL=1.f8163af7f7e7972a7786.js.map